{"version":3,"sources":["../../src/calendar/displayEvent.js"],"names":["displayEvent","event","cb","content","uid","app","user","pid","div","$","$display","$goToPost","find","$goToUrl","modal","empty","append","external","hide","url","show","attr","RELATIVE_PATH","repeats","day","window","trigger","parsed"],"mappings":";;;;;;AAAA;;AACA;;AAEA,MAAMA,eAAe,CAACC,KAAD,EAAQC,EAAR,KAAe;AAClC,QAAMC,UAAU,8BAAc,EAAEF,YAAF,EAASG,KAAKC,IAAIC,IAAJ,CAASF,GAAvB,EAAd,CAAhB;AACA,QAAMG,MAAMN,MAAMM,GAAlB;;AAEA,QAAMC,MAAMC,EAAEN,OAAF,CAAZ;AACA,QAAMO,WAAWD,EAAE,oCAAF,CAAjB;AACA,QAAME,YAAYD,SAASE,IAAT,CAAc,sCAAd,CAAlB;AACA,QAAMC,WAAWH,SAASE,IAAT,CAAc,qCAAd,CAAjB;AACAF,WACGI,KADH,CACS,MADT,EAEGF,IAFH,CAEQ,oBAFR,EAGGG,KAHH,GAIGC,MAJH,CAIUR,GAJV;AAKA,MAAIP,MAAMgB,QAAV,EAAoB;AAClBN,cAAUO,IAAV;;AAEA,QAAIjB,MAAMkB,GAAV,EAAe;AACbN,eACGO,IADH,GAEGC,IAFH,CAEQ,MAFR,EAEgBpB,MAAMkB,GAFtB;AAGD,KAJD,MAIO;AACLN,eAASK,IAAT;AACD;AACF,GAVD,MAUO;AACLL,aAASK,IAAT;AACAP,cACGS,IADH,GAEGC,IAFH,CAEQ,MAFR,EAEiB,GAAEC,aAAc,SAAQf,GAAI,EAF7C;AAGD;AACDG,WACGE,IADH,CACQ,aADR,EAEGS,IAFH,CAEQ,UAFR,EAEoBd,GAFpB;AAGA,MAAI,CAACN,MAAMgB,QAAP,IAAmBhB,MAAMsB,OAA7B,EAAsC;AACpCb,aAASE,IAAT,CAAc,YAAd,EAA4BS,IAA5B,CAAiC,UAAjC,EAA6CpB,MAAMuB,GAAnD;AACD;AACDd,WACGI,KADH,CACS,MADT;;AAGA,4BAAU,EAAEP,QAAF,EAAV,EAAmB,MAAM;AACvBE,MAAEgB,MAAF,EAAUC,OAAV,CAAkB,+BAAlB,EAAmD,EAAEnB,QAAF,EAAOiB,KAAKvB,MAAMuB,GAAlB,EAAuBV,OAAOJ,QAA9B,EAAnD;;AAEA,QAAI,OAAOR,EAAP,KAAc,UAAlB,EAA8B;AAC5BA,SAAG,EAAEC,gBAAF,EAAWwB,QAAQ1B,KAAnB,EAAH;AACD;AACF,GAND;AAOD,CA7CD;;kBA+CeD,Y","file":"displayEvent.js","sourcesContent":["import { eventTemplate } from '../lib/templates';\nimport { setupPost } from '../client/responses';\n\nconst displayEvent = (event, cb) => {\n  const content = eventTemplate({ event, uid: app.user.uid });\n  const pid = event.pid;\n\n  const div = $(content);\n  const $display = $('#plugin-calendar-cal-event-display');\n  const $goToPost = $display.find('.modal-footer a.btn-primary.gotopost');\n  const $goToUrl = $display.find('.modal-footer a.btn-primary.gotourl');\n  $display\n    .modal('hide')\n    .find('.modal-body .posts')\n    .empty()\n    .append(div);\n  if (event.external) {\n    $goToPost.hide();\n\n    if (event.url) {\n      $goToUrl\n        .show()\n        .attr('href', event.url);\n    } else {\n      $goToUrl.hide();\n    }\n  } else {\n    $goToUrl.hide();\n    $goToPost\n      .show()\n      .attr('href', `${RELATIVE_PATH}/post/${pid}`);\n  }\n  $display\n    .find('.modal-body')\n    .attr('data-pid', pid);\n  if (!event.external && event.repeats) {\n    $display.find('[data-day]').attr('data-day', event.day);\n  }\n  $display\n    .modal('show');\n\n  setupPost({ pid }, () => {\n    $(window).trigger('action:calendar.event.display', { pid, day: event.day, modal: $display });\n\n    if (typeof cb === 'function') {\n      cb({ content, parsed: event });\n    }\n  });\n};\n\nexport default displayEvent;\n"]}