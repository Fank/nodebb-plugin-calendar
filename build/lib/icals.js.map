{"version":3,"sources":["../../src/lib/icals.js"],"names":["p","promisify","db","require","main","utils","sortedSetAdd","sortedSetCard","setObject","getSortedSetRange","addICal","data","icalId","generateUUID","count","err","asd","getICals","icals","console","log"],"mappings":";;;;;;;;;;;;;AAEA,MAAMA,IAAI,mBAAQC,SAAlB;AACA,MAAMC,KAAKC,QAAQC,IAAR,CAAaD,OAAb,CAAqB,gBAArB,CAAX;AACA,MAAME,QAAQF,QAAQC,IAAR,CAAaD,OAAb,CAAqB,oBAArB,CAAd;;AAEA,MAAMG,eAAeN,EAAEE,GAAGI,YAAL,CAArB;AACA,MAAMC,gBAAgBP,EAAEE,GAAGK,aAAL,CAAtB;AACA,MAAMC,YAAYR,EAAEE,GAAGM,SAAL,CAAlB;AACA,MAAMC,oBAAoBT,EAAEE,GAAGO,iBAAL,CAA1B;;AAEA,MAAMC;AAAA,sCAAU,WAAOC,IAAP,EAAgB;AAC9B,UAAMC,SAASP,MAAMQ,YAAN,EAAf;AACA,UAAMC,QAAQ,MAAMP,cAAc,wBAAd,CAApB;AACA,UAAMQ,MAAM,MAAMT,aAAa,wBAAb,EAAuCQ,QAAM,CAA7C,EAAgDF,MAAhD,CAAlB;AACA,UAAMI,MAAM,MAAMR,UAAU,2BAA2BI,MAArC,EAA6CD,IAA7C,CAAlB;AACD,GALK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAOA,MAAMM;AAAA,uCAAW,aAAY;AAC3B,UAAMC,QAAQ,MAAMT,kBAAkB,wBAAlB,CAApB;AACAU,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAHK;;AAAA;AAAA;AAAA;AAAA,IAAN;;QAMER,O,GAAAA,O;QACAO,Q,GAAAA,Q","file":"icals.js","sourcesContent":["import Promise from 'bluebird';\n\nconst p = Promise.promisify;\nconst db = require.main.require('./src/database');\nconst utils = require.main.require('./public/src/utils');\n\nconst sortedSetAdd = p(db.sortedSetAdd);\nconst sortedSetCard = p(db.sortedSetCard);\nconst setObject = p(db.setObject);\nconst getSortedSetRange = p(db.getSortedSetRange);\n\nconst addICal = async (data) => {\n  const icalId = utils.generateUUID();\n  const count = await sortedSetCard('plugins:calendar:icals');\n  const err = await sortedSetAdd('plugins:calendar:icals', count+1, icalId);\n  const asd = await setObject('plugins:calendar:ical:' + icalId, data);\n};\n\nconst getICals = async () => {\n  const icals = await getSortedSetRange('plugins:calendar:icals');\n  console.log(icals);\n}\n\nexport {\n  addICal,\n  getICals,\n};\n"]}