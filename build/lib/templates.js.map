{"version":3,"sources":["../../src/lib/templates.js"],"names":["makeListElement","n","li","eventTemplate","event","isEmail","uid","startDate","endDate","allday","response","responses","responsesTemplate","day","repeats","active","no","maybe","yes","external","html","name","source","location","description","reminders","length","sort","a","b","map","join","key","find","x","every","daysOfWeek","days","endDateText","Number","isFinite","mandatory"],"mappings":"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","file":"templates.js","sourcesContent":["const makeListElement = (n) => {\n  const li = `<li data-value=\"${n}\">[[moment:time-duration, ${n}]]</li>`;\n  return li;\n};\n\nconst eventTemplate = ({ event, isEmail, uid }) => {\n  const { startDate, endDate, allday } = event;\n\n  let response = 'no';\n  if (uid && event.responses && event.responses[uid]) {\n    response = event.responses[uid];\n  }\n  const responsesTemplate = () => `\n<div class=\"plugin-calendar-event-responses\" data-day=\"${event.day || ''}\">\n  <i class=\"fa fa-reply\" aria-hidden=\"true\"></i>\n  <div class=\"col-xs-12 col-sm-6\">\n    ${event.repeats ? `\n    <div class=\"input-group plugin-calendar-event-responses-day\">\n      <input class=\"form-control\" title=\"[[calendar:select_day]]\" type=\"text\">\n      <span class=\"input-group-addon\">\n        <i class=\"fa fa-calendar-check-o\"></i>\n      </span>\n    </div>\n    ` : ''}\n    ${uid === 0 ? '' : `\n    <div class=\"plugin-calendar-event-responses-user btn-group\">\n      ${(() => {\n        const active = {\n          no: '',\n          maybe: '',\n          yes: '',\n          [response]: 'active',\n        };\n\n        return `\n      <button data-value=\"no\" type=\"button\" class=\"btn btn-sm btn-danger ${active.no}\">\n        [[calendar:response_no]]\n      </button>\n      <button data-value=\"maybe\" type=\"button\" class=\"btn btn-sm btn-default ${active.maybe}\">\n        [[calendar:response_maybe]]\n      </button>\n      <button data-value=\"yes\" type=\"button\" class=\"btn btn-sm btn-success ${active.yes}\">\n        [[calendar:response_yes]]\n      </button>\n        `;\n      })()}\n    </div>\n    `}\n    <div class=\"panel-group plugin-calendar-event-responses-lists\" data-loaded=\"false\">\n      <div class=\"panel panel-default closed\">\n        <div class=\"panel-heading\">\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\n          class=\"btn btn-sm btn-info\" aria-expanded=\"true\">\n            <i class=\"fa fa-chevron-down pull-right\"></i>\n            [[calendar:response_yes]]\n          </a>\n        </div>\n        <div class=\"panel-collapse\">\n          <div class=\"panel-body\">\n            <ul class=\"plugin-calendar-event-responses-list-yes\">\n              <!-- yes responses go here -->\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"panel panel-default closed\">\n        <div class=\"panel-heading\">\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\n          class=\"btn btn-sm btn-link\" aria-expanded=\"true\">\n            <i class=\"fa fa-chevron-down pull-right\"></i>\n            [[calendar:response_maybe]]\n          </a>\n        </div>\n        <div class=\"panel-collapse\">\n          <div class=\"panel-body\">\n            <ul class=\"plugin-calendar-event-responses-list-maybe\">\n              <!-- maybe responses go here -->\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"panel panel-default closed\">\n        <div class=\"panel-heading\">\n          <a role=\"button\" data-toggle=\"collapse\" href=\"#\"\n          class=\"btn btn-sm btn-warning\" aria-expanded=\"true\">\n            <i class=\"fa fa-chevron-down pull-right\"></i>\n            [[calendar:response_no]]\n          </a>\n        </div>\n        <div class=\"panel-collapse\">\n          <div class=\"panel-body\">\n            <ul class=\"plugin-calendar-event-responses-list-no\">\n              <!-- no responses go here -->\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`;\n  let responses = isEmail ? `\n  <div class=\"plugin-calendar-event-responses\">\n    <i class=\"fa fa-reply\" aria-hidden=\"true\"></i>\n    [[calendar:you_responded, [[calendar:response_${response}]]]]\n  </div>\n  ` : responsesTemplate();\n\n  if (event.external) {\n    responses = '';\n  }\n\n  const html = `\n<div class=\"plugin-calendar-event panel panel-success\" data-translated=\"false\">\n  <div class=\"plugin-calendar-event-name panel-heading\">\n    ${event.name}\n  </div>\n  <div class=\"panel-body\">\n    <div class=\"plugin-calendar-event-date\">\n      <i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i>\n      <a\n        title=\"[[moment:time-date-view, utc, ${startDate}, ${endDate}, ${allday}]] UTC\"\n        class=\"plugin-calendar-time-date-view\"\n      >[[moment:time-date-view, local, ${startDate}, ${endDate}, ${allday}]]</a>\n    </div>\n    ${event.external ? `\n    <div class=\"plugin-calendar-event-location\">\n      <i class=\"fa fa-location-arrow\" aria-hidden=\"true\"></i>\n      <span>External: ${event.source}<span>\n    </div>\n    ` : ''}\n    ${event.location ? `\n    <div class=\"plugin-calendar-event-location\">\n      <i class=\"fa fa-location-arrow\" aria-hidden=\"true\"></i>\n      <span>${event.location}<span>\n    </div>\n    ` : ''}\n    ${event.description ? `\n    <div class=\"plugin-calendar-event-description\">\n      <i class=\"fa fa-info-circle\" aria-hidden=\"true\"></i>\n      <div>${event.description}</div>\n    </div>\n    ` : ''}\n    ${!event.external && event.reminders.length ? `\n    <div class=\"plugin-calendar-event-reminders\">\n      <i class=\"fa fa-bell\" aria-hidden=\"true\"></i>\n      <ul>\n        ${event.reminders\n          .sort((a, b) => a - b)\n          .map(makeListElement).join('\\n')}\n      </ul>\n    </div>\n    ` : ''}\n    ${(() => {\n      if (event.repeats) {\n        const key = ['day', 'week', 'month', 'year'].find(x => event.repeats.every[x]);\n        if (key) {\n          return `<div class=\"plugin-calendar-event-repeats\">\n            <i class=\"fa fa-repeat\" aria-hidden=\"true\"></i>\n            <span>[[calendar:every_${key}]]</span>\n          </div>`;\n        }\n        if (event.repeats.every.daysOfWeek) {\n          const days = event.repeats.every.daysOfWeek\n            .map(day => `[[moment:locale-data, _weekdaysShort, ${day}]]`)\n            .join(', ');\n          const endDateText = `[[moment:time-date-view, utc, ${event.repeats.endDate}, ` +\n            `${event.repeats.endDate}, true]]`;\n          return `<div class=\"plugin-calendar-event-repeats\">\n            <i class=\"fa fa-repeat\" aria-hidden=\"true\"></i>\n            <span>\n              ${Number.isFinite(event.repeats.endDate) ? `\n              [[calendar:repeats_weekly_on_until, ${endDateText}]] ${days}\n              ` : `\n              [[calendar:repeats_weekly_on_forever]] ${days}\n              `}\n            </span>\n          </div>`;\n        }\n      }\n      return '';\n    })()}\n    ${event.mandatory ? `\n    <div class=\"plugin-calendar-event-mandatory\">\n      <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n      <span>[[calendar:mandatory]]</span>\n    </div>\n    ` : responses}\n  </div>\n</div>`;\n\n  return html;\n};\n\nexport { eventTemplate };\n"]}