{"version":3,"sources":["../../src/lib/translatorModule.js"],"names":["justDate","justTime","dateAndTime","formatDates","s","e","allday","lang","utc","mom","start","locale","end","Math","abs","format","dayOfYear","year","init","Translator","registerModule","momentLang","replace","zero","timeago","key","duration","ms","parseInt","from","to","timeDateView","timezone","isAllday","data","localeData","n","a","name","args","map","x","test","index"],"mappings":"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","file":"translatorModule.js","sourcesContent":["import moment from 'moment';\n\nconst justDate = 'dddd, LL';\nconst justTime = 'LT';\nconst dateAndTime = 'LLLL';\n\nconst formatDates = (s, e, allday, lang, utc) => {\n  const mom = utc ? moment.utc : moment;\n\n  const start = mom(s).locale(lang);\n  const end = mom(e).locale(lang);\n\n  if (Math.abs(s - e) <= 60 * 1000) {\n    if (allday) {\n      return start.format(justDate);\n    }\n    return start.format(dateAndTime);\n  }\n\n  if (\n    start.dayOfYear() === end.dayOfYear() &&\n    start.year() === end.year()\n  ) {\n    if (allday) {\n      return start.format(justDate);\n    }\n    return `${start.format(justDate)}<br>` +\n      `${start.format(justTime)} - ${end.format(justTime)}`;\n  }\n\n  if (allday) {\n    return `${start.format(justDate)} - ${end.format(justDate)}`;\n  }\n  return `${start.format(dateAndTime)} - ${end.format(dateAndTime)}`;\n};\n\nconst init = (Translator) => {\n  Translator.registerModule('moment', (lang) => {\n    const momentLang = lang.replace(/[_@]/g, '-');\n    const zero = moment(0).locale(momentLang);\n\n    const timeago = (key, [duration]) => {\n      const ms = parseInt(duration, 10);\n      switch (key) {\n        case 'time-ago':\n          return zero.from(ms);\n        case 'time-in':\n          return zero.to(ms);\n        case 'time-duration':\n          return zero.to(ms, true);\n        default:\n          return '';\n      }\n    };\n\n    const timeDateView = (key, [timezone, start, end, allday]) => {\n      const s = parseInt(start, 10);\n      const e = parseInt(end, 10);\n      const isAllday = allday === 'true';\n\n      if (timezone === 'utc') {\n        return formatDates(s, e, isAllday, momentLang, true);\n      }\n      if (timezone === 'local') {\n        return formatDates(s, e, isAllday, momentLang, false);\n      }\n      return '';\n    };\n\n    const data = zero.localeData();\n    const localeData = (key, [n, ...a]) => {\n      let name = n;\n      if (!data[name]) {\n        name = `_${n}`;\n        if (!data[name]) {\n          return '';\n        }\n      }\n      const args = a.map((x) => {\n        if (x === 'true') {\n          return true;\n        }\n        if (x === 'false') {\n          return false;\n        }\n        if (/^[0-9]+$/.test(x)) {\n          return parseInt(x, 10);\n        }\n        return x;\n      });\n      if (typeof data[name] === 'function') {\n        return data[name](...args);\n      }\n      const [index] = args;\n      return data[name][index];\n    };\n\n    return (key, args) => {\n      switch (key) {\n        case 'time-in':\n        case 'time-ago':\n        case 'time-duration':\n          return timeago(key, args);\n        case 'time-date-view':\n          return timeDateView(key, args);\n        case 'locale-data':\n          return localeData(key, args);\n        default:\n          return '';\n      }\n    };\n  });\n};\n\nexport { formatDates };\nexport default init;\n"]}